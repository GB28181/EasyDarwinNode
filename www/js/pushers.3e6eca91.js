webpackJsonp([1],{"5U11":function(t,e,r){"use strict";var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=["B","kB","MB","GB","TB","PB","EB","ZB","YB"];t.exports=function(t){if(!Number.isFinite(t))throw new TypeError("Expected a finite number, got "+(void 0===t?"undefined":a(t))+": "+t);var e=t<0;if(e&&(t=-t),t<1)return(e?"-":"")+t+" B";var r=Math.min(Math.floor(Math.log(t)/Math.log(1e3)),s.length-1),n=Number((t/Math.pow(1e3,r)).toPrecision(3)),i=s[r];return(e?"-":"")+n+" "+i}},B84x:function(t,e,r){"use strict";r.d(e,"a",function(){return a}),r.d(e,"b",function(){return s});var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container-fluid no-padding"},[t._m(0),t._v(" "),r("div",{staticClass:"box box-success"},[r("div",{staticClass:"box-header"},[r("h4",{staticClass:"text-success text-center"},[t._v("推流列表")]),t._v(" "),r("form",{staticClass:"form-inline"},[r("div",{staticClass:"form-group pull-right"},[r("div",{staticClass:"input-group"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.query,expression:"query",modifiers:{trim:!0}}],ref:"search",staticClass:"form-control",attrs:{type:"text",placeholder:"搜索"},domProps:{value:t.query},on:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?(e.preventDefault(),t.doSearch(e)):null},input:function(e){e.target.composing||(t.query=e.target.value.trim())},blur:function(e){t.$forceUpdate()}}}),t._v(" "),r("div",{staticClass:"input-group-btn"},[r("button",{staticClass:"btn btn-default",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.doSearch(e)}}},[r("i",{staticClass:"fa fa-search"})])])])])])]),t._v(" "),r("div",{staticClass:"box-body"},[r("el-table",{staticClass:"view-list",attrs:{data:t.pushers,stripe:"","default-sort":{prop:"startAt",order:"descending"}},on:{"sort-change":t.sortChange}},[r("el-table-column",{attrs:{prop:"id",label:"ID","min-width":"120"}}),t._v(" "),r("el-table-column",{attrs:{prop:"path",label:"地址","min-width":"240"}}),t._v(" "),r("el-table-column",{attrs:{prop:"transType",label:"传输方式","min-width":"100"},scopedSlots:t._u([{key:"default",fn:function(e){return["tcp"==e.row.transType?r("span",[t._v("TCP")]):r("span",[t._v("UDP")])]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"inBytes",label:"上行流量","min-width":"120",formatter:t.formatBytes,sortable:"custom"}}),t._v(" "),r("el-table-column",{attrs:{prop:"outBytes",label:"下行流量","min-width":"120",formatter:t.formatBytes,sortable:"custom"}}),t._v(" "),r("el-table-column",{attrs:{prop:"onlines",label:"在线人数","min-width":"100",sortable:"custom"}}),t._v(" "),r("el-table-column",{attrs:{prop:"startAt",label:"开始时间","min-width":"200",sortable:"custom"}})],1)],1),t._v(" "),r("div",{staticClass:"box-footer clearfix"},[r("el-pagination",{staticClass:"pull-right",attrs:{layout:"prev,pager,next",total:t.total,"page-size":t.pageSize,"current-page":t.page},on:{"current-change":t.pageChange}})],1)])])},s=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"alert alert-success alert-dismissible"},[r("small",[r("strong",[r("i",{staticClass:"fa fa-info-circle"}),t._v(" 提示 : ")]),t._v(" \n            屏幕直播工具可以采用"),r("a",{attrs:{href:"https://github.com/EasyDSS/EasyScreenLive",target:"_blank"}},[t._v(" EasyScreenLive "),r("i",{staticClass:"fa fa-external-link"})]),t._v("，\n            "),r("span",{staticClass:"push-url-format"},[t._v("推流URL规则: rtsp://{ip}:{port}/{id}")]),t._v(" ，\n            例如 : rtsp://www.easydarwin.org:554/your_stream_id\n        ")]),t._v(" "),r("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"alert","aria-label":"Close"}},[r("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}]},ad07:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r("rbL3"),s=r.n(a);for(var n in a)"default"!==n&&function(t){r.d(e,t,function(){return a[t]})}(n);var i=r("B84x"),o=r("XyMi"),l=Object(o.a)(s.a,i.a,i.b,!1,null,null,null);e.default=l.exports},rbL3:function(t,e,r){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var a=r("5U11"),s=function(t){return t&&t.__esModule?t:{default:t}}(a);e.default={props:{page:{type:Number,default:1},q:{type:String,default:""}},data:function(){return{query:"",sort:"startAt",order:"descending",pushers:[],total:0,timer:0,pageSize:10}},beforeDestroy:function(){this.timer&&(clearInterval(this.timer),this.timer=0)},mounted:function(){var t=this;this.query=this.q,this.$refs.search.focus(),this.timer=setInterval(function(){t.load()},3e3)},methods:{load:function(){var e=this;t.post("/stats/pushers",{q:this.q,start:(this.page-1)*this.pageSize,limit:this.pageSize,sort:this.sort,order:this.order}).then(function(t){e.total=t.total,e.pushers=t.rows})},pageChange:function(t){this.$router.push("/pushers/"+t+(this.q?"?q="+this.q:""))},doSearch:function(){this.$router.push("/pushers/"+this.page+(this.query?"?q="+this.query:""))},sortChange:function(t){this.sort=t.prop,this.order=t.order,this.load()},formatBytes:function(t,e,r){return void 0==r?"-":(0,s.default)(r)}},beforeRouteEnter:function(t,e,r){return t.params.page?(t.params.page=parseInt(t.params.page)||1,t.params.q=t.query.q,r()):r({path:"/pushers/1",replace:!0})},beforeRouteUpdate:function(t,e,r){var a=this;if(!t.params.page)return r({path:"/pushers/1",replace:!0});t.params.page=parseInt(t.params.page)||1,t.params.q=t.query.q,r(),this.$nextTick(function(){a.query=a.q,a.load()})}}}).call(e,r("0iPh"))}});